<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lunch - Trung_cooKING</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>ğŸ¥ª Lunch</h1>
      <p>Simple and satisfying meals</p>
    </header>

    <section class="content">
      <div class="search-section">
        <div class="search-container">
          <input
            type="text"
            id="searchInput"
            placeholder="ğŸ” Search lunch recipes..."
            class="search-input"
          />
          <button class="search-btn" onclick="searchRecipes()">Search</button>
        </div>
      </div>

      <h2 class="section-title">All Lunch Recipes</h2>

      <div class="recipe-grid">
        <div class="recipe-card">
          <div class="recipe-image">ğŸ¥—</div>
          <div class="recipe-info">
            <h3>Chicken Salad</h3>
            <div class="recipe-meta-inline">
              <span class="difficulty easy">Easy</span>
              <span class="rating">â­â­â­â­â­</span>
              <span class="time">20 mins</span>
            </div>
            <p>
              Fresh and healthy salad with grilled chicken and homemade dressing
            </p>
            <a href="salad.html">View Recipe</a>
          </div>
        </div>

        <div class="recipe-card">
          <div class="recipe-image">ğŸ¥ª</div>
          <div class="recipe-info">
            <h3>Club Sandwich</h3>
            <div class="recipe-meta-inline">
              <span class="difficulty easy">Easy</span>
              <span class="rating">â­â­â­â­â­â­</span>
              <span class="time">15 mins</span>
            </div>
            <p>Layered sandwich with deli meat, cheese, and fresh vegetables</p>
            <a href="sandwich.html">View Recipe</a>
          </div>
        </div>
      </div>

      <h2 class="section-title">Popular Lunch</h2>

      <div class="popular-grid">
        <div class="popular-card">
          <div class="popular-image">ğŸ¥—</div>
          <div class="popular-info">
            <h4>Chicken Salad</h4>
            <div class="popular-meta">
              <span class="rating">â­â­â­â­â­</span>
              <span class="difficulty easy">Easy</span>
            </div>
          </div>
        </div>

        <div class="popular-card">
          <div class="popular-image">ğŸ¥ª</div>
          <div class="popular-info">
            <h4>Club Sandwich</h4>
            <div class="popular-meta">
              <span class="rating">â­â­â­â­â­â­</span>
              <span class="difficulty easy">Easy</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <nav class="bottom-nav">
      <a href="breakfast.html">
        <span class="nav-icon">ğŸ³</span>
        <span>Breakfast</span>
      </a>
      <a href="lunch.html" class="active">
        <span class="nav-icon">ğŸ¥ª</span>
        <span>Lunch</span>
      </a>
      <a href="index.html">
        <span class="nav-icon home-icon">ğŸ </span>
        <span>Home</span>
      </a>
      <a href="dinner.html">
        <span class="nav-icon">ğŸ</span>
        <span>Dinner</span>
      </a>
      <a href="add.html">
        <span class="nav-icon">â•</span>
        <span>Add</span>
      </a>
    </nav>

    <script>
      // Lunch recipe data
      const lunchRecipes = [
        {
          name: "Chicken Salad",
          difficulty: "easy",
          rating: 4,
          time: "20 mins",
          emoji: "ğŸ¥—",
          description:
            "Fresh and healthy salad with grilled chicken and homemade dressing",
          url: "salad.html",
        },
        {
          name: "Club Sandwich",
          difficulty: "easy",
          rating: 5,
          time: "15 mins",
          emoji: "ğŸ¥ª",
          description:
            "Layered sandwich with deli meat, cheese, and fresh vegetables",
          url: "sandwich.html",
        },
      ];

      // Search functionality
      function searchRecipes() {
        const searchTerm = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const recipeGrid = document.querySelector(".recipe-grid");

        if (searchTerm === "") {
          displayAllRecipes();
          return;
        }

        const filteredRecipes = lunchRecipes.filter(
          (recipe) =>
            recipe.name.toLowerCase().includes(searchTerm) ||
            recipe.description.toLowerCase().includes(searchTerm),
        );

        displayRecipes(filteredRecipes, recipeGrid);
      }

      // Display all recipes
      function displayAllRecipes() {
        const recipeGrid = document.querySelector(".recipe-grid");
        displayRecipes([], recipeGrid);
      }

      // Display recipes in grid
      function displayRecipes(recipesToDisplay, container) {
        const allRecipes = [...lunchRecipes, ...getUserRecipes()];
        const filteredRecipes = recipesToDisplay.length
          ? recipesToDisplay
          : allRecipes.filter((r) => r.category === "lunch");

        container.innerHTML = filteredRecipes
          .map((recipe) => {
            const isUserRecipe = recipe.id && recipe.id.startsWith("recipe_");
            return `
            <div class="recipe-card">
              <div class="recipe-image">${recipe.emoji || "ğŸ¥ª"}</div>
              <div class="recipe-info">
                <h3>${recipe.name}</h3>
                <div class="recipe-meta-inline">
                  <span class="difficulty ${recipe.difficulty || "easy"}">${recipe.difficulty || "Easy"}</span>
                  <span class="rating">${"â­".repeat(recipe.rating || 4)}</span>
                  <span class="time">${recipe.prepTime || "15 mins"}</span>
                </div>
                <p>${recipe.description}</p>
                <div class="recipe-actions">
                  ${
                    isUserRecipe
                      ? `
                    <button class="edit-btn" onclick="editUserRecipe('${recipe.id}')">âœï¸ Edit</button>
                    <button class="delete-btn" onclick="deleteUserRecipe('${recipe.id}')">ğŸ—‘ï¸ Delete</button>
                  `
                      : ""
                  }
                  <a href="${recipe.url}" class="view-btn">ğŸ‘ï¸ View Recipe</a>
                </div>
              </div>
            </div>
          `;
          })
          .join("");
      }

      // Get user recipes from localStorage
      function getUserRecipes() {
        return JSON.parse(localStorage.getItem("recipes") || "[]");
      }

      // Edit user recipe
      function editUserRecipe(recipeId) {
        window.location.href = `add.html?edit=${recipeId}`;
      }

      // Delete user recipe
      function deleteUserRecipe(recipeId) {
        if (confirm("Are you sure you want to delete this recipe?")) {
          const recipes = getUserRecipes();
          const updatedRecipes = recipes.filter((r) => r.id !== recipeId);
          localStorage.setItem("recipes", JSON.stringify(updatedRecipes));
          displayAllRecipes();
          alert("Recipe deleted successfully! ğŸ—‘ï¸");
        }
      }

      // Search on Enter key
      document
        .getElementById("searchInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            searchRecipes();
          }
        });

      displayAllRecipes();
    </script>
  </body>
</html>
